- 학습을 위해 글을 올립니다.
- 모든 출처와 저작권은 Geeksforgeeks에 있습니다.

[^출처]: https://www.geeksforgeeks.org/



# 프로세스 동기화_운영체제의 Semaphores

- 세마포어는 단순히 변수인데 섹션 문제를 해결하고 다중 처리 환경에서 프로세스를 동기화하는 목적을 달성하기 위해 사용된다.
- 세마포어의 가장 일반적인 두 종류는 카운팅 세마포어와 바이너리 세마포어이다. 카운팅 세마포어는 음수가 아닌 정수 값을 취할 수 있고 이진 세마 포어는 0과 1값 만을 가질 수 있다.



![](https://www.geeksforgeeks.org/wp-content/uploads/Semaphores_1.png)

##### P 및  V 작동에 관한 몇 가지 사항

1. P 동작은 대기, 슬립 또는 다운 동작이라고도 하며, V동작은 신호, 웨이크 업 또는 업 동작이라고도 한다.
2. 두 연산자 모두 원자적이며 세마포어는 항상 1로 초기화 된다.
3. 임계영역은 프로세스 동기화를 구현하는 두 가지 작업으로 둘러 있는데 프로세스 P의 image.critical 섹션은 P와 V작업 사이에 있다.

![img](https://www.geeksforgeeks.org/wp-content/uploads/Semaphores_2.png)



##### 바이너리 세마포어 생각

두 개의 프로세스 P1과 P2가 있고 세마포어 s는 1로 초기화된다. 이제 P1이 임계영역에 들어가 있다고 하면 세마포어 s의 값은 0이 된다. 이제 P2가 임계영역에 들어가기 원하면 s > 0 일때 P1은 임계 영역을 끝내고 세마포어에서 V연산을 호출 할 때만 발생할 수 있다. 이렇게 하면 상호 배제가 이뤄진다.

![img](https://www.geeksforgeeks.org/wp-content/uploads/Semaphores_3.jpg)



##### 카운팅 세마포어 생각

인스턴스의 수가 4인 리소스가 있다고 가정해보자. 이제 S = 4로 초기화하고 나머지는 바이너리 세마포어와 동일하다고 생각하면 된다. 프로세스가 해당 리소스를 원할 때마다 P 또는 대기 함수를 호출하고 완료되면 V 또는 신호 함수를 호출한다. S의 값이 0이되면 프로세스는 S가 양수가 될 때까지 대기해야 한다. 예를 들어 프로세스 P1, P2, P3, P4 4개가 있고 모두 S(4로 초기화 됨)에 대한 대기 작업을 호출한다고 가정해보자. 다른 프로세스 P5가 자원을 원하면 4개의 프로세스 호출 중 하나가 신호 함수와 세마포어 값이 양수가 될 때까지 대기해야 한다.