- 학습을 위해 글을 올립니다.
- 모든 출처와 저작권은 Geeksforgeeks에 있습니다.

[^출처]: https://www.geeksforgeeks.org/



# 메모리관리_페이지 오류 처리

- 프로그램이 주소 공간에 있지만 현재 시스템 RAM에 있지 않은 데이터나 코드에 액세스하려고 하면 페이지 폴트가 발생한다. 따라서 페이지 오류가 발생하면 다음과 같은 이벤트가 발생한다.

![img](http://contribute.geeksforgeeks.org/wp-content/uploads/121-1.png)

- 컴퓨터 하드웨어 트랩을 커널 및 프로그램 카운터(PC)스택에 저장된다. 현재 명령 상태 정보는 CPU레지스터에 저장된다.
- 어셈블리 프로그램은 범용 레지스터 및 기타 휘발성 정보를 저장해 OS 가이를 파괴하지 않도록 하기 위해 시작된다.
- 운영 체제는 페이지 폴트가 발생해 필요한 가상 페이지를 찾으려고 시도한다. 일부 하드웨어 레지스터에는 필수 정보가 들어 있다. 그렇지 않은 경우 운영체제는 PC를 검색하고 명령을 가져와 오류가 발생 했을 때 수행중인 작업을 찾아야 한다.
- 가상 주소로 인해 페이지 오류가 알려지면 시스템은 주소가 유효한지 검사해 보호 액세스 문제가 없는지 확인한다.
- 가상 주소가 유효하면 시스템은 페이지 프레임이 비어있는지 확인한다. 여유 공간이 없는 프레임이 없는 경우 페이지 교체 알고리즘을 실행해 페이지를 제거한다.
- 선택한 프레임이 지저분한 경우 페이지가 디스크로 전송되도록 예약되고 컨텍스트 전환이 발생해 폴트 프로세스가 일시 중단되고 디스크 전송이 완료 될 때가지 다른 프로세스가 실행된다.
- 페이지 프레임이 깨끗해지면 운영 체제는 필요한 페이지가 있는 디스크 주소를 조회하고 디스크 작업을 가져 오도록 예약한다.
- 디스크 인터럽트가 페이지가 도착했다는 것을 나타낼 대 페이지 테이블은 그 위치를 반영하도록 업데이트 되고 프레임은 정상 상태로 표시쇤다.
- 오류가 있는 명령은 시작되고 PC가 재설정 된 상태로 백업된다. 오류가 발생하면 운영 체제는 이를 호출한 루팅으로 돌아간다.
- 어셈블리 루틴은 레지스터 및 다른 상태 정보를 다시 로드하고 실행을 계속하기 위해 사용자 공간으로 돌아간다.