# 블록체인의 개요

### 스마트 거래의 구조

- 풀노드
- 채굴노드
- SPV 노드
  - 풀노드로부터 블록 전체 다운로드 후 모든 것을 확인 (네크워크 처리 노드 부담)
    - 머클트리 자료구조를 이용해 완전성 비교
- 블록크기 1M byte로 제한
  - 블록 전체를 확인하고 생성하는 동안 다른 채굴자가 중복 채굴해서 같은 순간에 여러개의 블록이 생성되는 상황이 발생할 수 있다.(블록체인 하드포크)
    - 이를 해결하기 위해 블록 채굴자 결정 알고리즘 존재



### 작업증명과 인센티브

#### SPV 노드

- SPV 노드 : 블록 헤더 정보 유지
- 블록헤더 : 해시포인터, 난이도 목표, 넌스, 머클루트, 패트리샤 머클트리 (자료구조 활용)

#### 비트코인 거래

- 지불정보를 저장(출력, 목적지, 자금, 전달 행위 규정)
- UTXO 메모리 유지

#### 거래수수료

- 킬로바이트에 대한 단위 거래 수수료로 계산

#### 코인베이스 거래

- 잠금 스크립트를 활용 escrow 같은 시스템 제작 가능

#### 비트코인은 스택 랭귀지

- 반복 명령 실행 미지원 (DoS Attact 방지)
- 기본 명령들이 다 지원 되지 않아서 ```튜링불완전 언어```를 사용한다 라고 한다.



### 블록체인 합의 프로토콜

- 익명 기반 P2P 시스템
- 블록합의 전제
  - 채굴자가 생성
  - 분산된 참여자
  - 동기화된 상태 유지
  - 자발적 참여 유도
- Sybil 공격 가능성 / 익명성 / P2P 보안 불안  >> 때문에 명시적 합의(**투표 결정**)가 어렵다
  - 작업증명, 인센티브로 이 문제를 해결해 블록체인 합의 프로토콜 구조를 만듦



### 합의 규칙 변경

- 소프트 포크 : 호환성 유지, 합의 규칙 변경
- 하드 포크 : 기존 비트코인과 호환성 결여를 무릎쓰고 이뤄지는 합의 규칙 변경
  - 비트코인 (1MB)
  - 비트코인캐시 (2MB)
    - 사용자에게 전달되는 시간이 오래 걸린다. 
    - 오래 걸릴수록 hashpower를 가진 일부만 유리할 수 있는 단점이 있다.



### 묵시적인 합의 알고리즘 채택