- 학습을 위해 글을 올립니다.
- 모든 출처와 저작권은 Geeksforgeeks에 있습니다.

[^출처]: https://www.geeksforgeeks.org/



# CPU스케줄링_다중 레벨 피드백 큐 스케줄링

- MLQ(Multilevel Queue) 예약과 유사하지만 프로세스에서 대기열간에 이동할 수 있다. MLFQ(Multilevel Feedback Queue Scheduling)는 프로세스의 동작(실행 시간)을 분석하고 우선 순위를 변경한다.

![img](http://contribute.geeksforgeeks.org/wp-content/uploads/Multilevel-Feedback-Queue-Scheduling-300x269.png)

- 큐1과 큐2가 각각 시간 퀀텀 4와 8로 라운드 로빈을 수행하고 큐3이 FCFS를 따른다고 가정해 보자. 

1. 프로세스가 실행하면서 먼저 큐1에 들어간다.
2. 대기열 1 프로세스는 4유닛에 대해 실행되며 4 유닛에서 완료되거나 4유닛에서 I/O 작업을 위한 CPU가 이 프로세스의 우선 순위보다 높으면 변경되지 않으며 다시 대기열에 들어온 경우 Queue 1에서 실행을 시작한다.
3. 대기열 1의 프로세스가 4단위로 완료되지 않으면 우선 순위가 낮아지고 대기열2로 이동한다.
4. 점2와 3위는 큐 2 프로세스에도 적용되지만 시간 퀀텀은 8단위이다. 일반적으로 프로세스가 시간 퀀텀에서 완료되지 않으면 우선 순위가 낮은 큐로 이동합니다.
5. 마지막 대기열에서 프로세스는 FCFS방식으로 스케줄됩니다.
6. 우선 순위가 낮은 대기열의 프로세스는 우선 순위가 높은 대기열이 비어있는 경우에만 실행할 수 있습니다.
7. 우선 순위가 낮은 대기열에서 실행중인 프로세스는 우선 순위가 높은 대기열에 도착하는 프로세스에 의해 중단된다.

※ 예를 들어 마지막 큐는 라운드 로빈 스케줄링을 따를 수 있다.



##### 문제

- 우선 순위가 낮은 대기열의 프로세스는 모든 CPU 시간을 소비하는 짧은 프로세스로 인해 기아가 발생할 수 있다.



##### 해결책

- 일정한 간격 후에 모든 프로세스의 우선 순위를 높이고 우선 순위가 가장 높은 대기열에 모두 배치한다.



##### 필요성

- 첫째, 다중 레벨 큐 스케줄링보다 더 유연하다.
- SJF와 같은 처리 시간을 최적화하려면 프로세스를 실행하기 위해 실행 시간을 필요로 하는 SJF와 같은 알고리즘이 필요하다. 그러나 프로세스의 실행 시간은 미리 알려지지 않기때문에 MFQS는 시간 퀀텀에 대한 프로세스를 실행한 다음 우선 순위를 변경할 수 있다.(긴 프로세스인 경우). 따라서 프로세스의 과거 동작으로부터 학습한 다음 다음 향후 동작을 예측한다. 이렇게 하면 짧은 프로세스를 먼저 실행하여 처리 시간을 최적화한다.
- MFQS는 응답 시간을 줄여준다.