- 학습을 위해 글을 올립니다.
- 모든 출처와 저작권은 Geeksforgeeks에 있습니다.

[^출처]: https://www.geeksforgeeks.org/



# 프로세스 동기화_Mutex vs Semaphore

- 스마트 응용 프로그램을 설계 / 개발하려면 운영 체제 개념을 구체적으로 이해해야한다. 운영 체제 용어에 따라 Mutex와 Semaphore는 동기화 서비스(동기화 프리미티브)를 제공하는 커널 리소스이다. 왜 필요할까? 예제로 이해해 보자

##### 생산자-소비자 문제

- 표준 생산자-소비자 문제를 생각해보자. 우리는 4096바이트 길이의 버퍼를 가지고 있다고 가정 할때 생성자 스레드는 데이터를 수집하여 버퍼에 쓴다. 소비자 스레드는 수집된 데이터를 버퍼에서 처리한다. 목표는 두 스레드가 동시에 실행되지 않아야 한다는 것이다.



##### 뮤텍스 사용하기

- 뮤텍스는 상호 배타를 제공하며 생산자 또는 소비자가 키(뮤텍스)를 가지고 작업을 진행할 수 있다. 버퍼가 생산자에 의해 채워지는 한, 소비자는 그 작업이 끝날 때까지 기다려야 하며 그 반대의 경우에도 동일하게 적용된다.
- 언제든지 하나의 스레드만 전체 버퍼를 이용해 작업할 수 있다.



##### 세마포어 사용

- 세마포어는 일반화 된 뮤텍스이다. 단일 버퍼 대신 4KB 버퍼를 4개의 1KB 버퍼(동일한 리소스)로 분할 해 사용한다. 세마포어는 이 네 개의 버퍼와 연관되는데 소비자와 생산자는 동시게 다른 버퍼에서 작업할 수 있다.



##### 혼동하면 안되는 것!!!

- 바이너리 세마포어와 뮤텍스 사이에는 구분하기 모호하다. 뮤텍스가 바이너리 세마포어 처럼 보이지만 실제로 그렇지 않다. 뮤텍스와 세마포어의 목적을 다르다!

#### 뮤텍스

- 뮤텍스는 리소스에 대한 액세스 동기화에 사용되는 **잠금 메커니즘**이다. 하나의 작업(OS 추상화에 기반한 스레드 또는 프로세스가 될 수 있다.)만이 뮤텍스를 획득 할 수 있다. 뮤텍스와 관련된 소유권이 있다는 것을 의미하며 소유자만이 락(뮤텍스)를 해제할 수 있다.

#### 세마포어

- 세마포어는 **신호 메커니즘**이다. 예를 들어 "이 작업은 끝났으니 다른 작업을 진행 할 수 있습니다." 하고 신호를 보낸다.